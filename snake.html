<html lang="ru"><head>
	<meta charset="UTF-8">
	<title>s_u_e_t_a_tih</title>

	<style>
		html, body {padding: 0;margin: 0;}
		* {box-sizing: border-box;}
		body {background: #ddd; padding: 50px;}
		canvas {
			background: black;
			margin: 0 auto;
			display: block;
		}
	</style>
<style>#tr-popup,#tr-popup * {all: unset;}#tr-popup {font: 15px "Segoe UI", Arial, Helvetica, sans-serif;color: #222;padding: 24px;display: block;z-index: 2147483647;position: absolute;max-width: 400px;min-width: 300px;direction: ltr;text-align: left;background: #fff;border-radius: 2px;box-sizing: border-box;box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 12px 24px 0 rgba(51, 51, 51, 0.3);transition: opacity, visibility;transition-duration: 0.2s;}#tr-popup[data-hidden="true"] {opacity: 0;visibility: hidden;}#tr-popup[data-position="top"] {margin-top: -12px;}#tr-popup[data-position="bottom"] {margin-top: 12px;}#tr-popup .tr-popup__arrow {top: 100%;left: 50%;width: 26px;height: 12px;display: block;position: absolute;margin-left: -13px;margin-top: -1px;background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNiIgaGVpZ2h0PSIxMiI+PHBhdGggZD0iTTAgMGwxMyAxMkwyNiAweiIgb3BhY2l0eT0iLjEiLz48cGF0aCBkPSJNMSAwbDEyIDExTDI1IDB6IiBmaWxsPSIjZmZmIi8+PC9zdmc+") no-repeat;}#tr-popup[data-position="bottom"] .tr-popup__arrow {top: auto;bottom: 100%;margin-bottom: -1px;transform: rotate(180deg);}#tr-popup .tr-popup__value,#tr-popup .tr-popup__block {word-wrap: break-word;white-space: pre-wrap;}[data-type="trSpan"][data-translated="true"][data-source-lang="ja"],[data-type="trSpan"][data-translated="true"][data-source-lang="zh"],#tr-popup .tr-popup__title_original,#tr-popup .tr-popup__block_a,#tr-popup .tr-popup__block_b,#tr-popup .tr-popup__button {font-family: "Segoe UI", Arial, Helvetica, sans-serif !important;}#tr-popup .tr-popup__title_original {font-weight: bold;}#tr-popup .tr-popup__block {display: block;}#tr-popup .tr-popup__link {cursor: pointer;-webkit-user-select: none;user-select: none;}#tr-popup .tr-popup__link_suggest {color: #1378d7;font-size: 13px;line-height: 18px;margin-right: 22px;}#tr-popup .tr-popup__link_suggest:hover,#tr-popup .tr-popup__link_suggest:active {color: #000;}#tr-popup .tr-popup__logo {height: 18px;opacity: 0.3;display: inline-block;transition: opacity 0.2s;vertical-align: top;}#tr-popup .tr-popup__logo_company {width: 34px;filter: brightness(0);background: url("https://yastatic.net/s3/trbro/v20.5.1.0/i/service_logo.svg");background-size: 34px;background-position: 0 -18px;}#tr-popup[lang="ru"] .tr-popup__logo_company {background-position: 0 0;}#tr-popup .tr-popup__logo_service {width: 42px;background: url("https://yastatic.net/s3/trbro/v20.5.1.0/i/service_name.svg");margin-left: 2px;background-size: 63px;background-position: 0 -18px;}#tr-popup[lang="ru"] .tr-popup__logo_service {width: 57px;background-position: 0 0;}#tr-popup[lang="uk"] .tr-popup__logo_service {width: 56px;background-position: 0 -36px;}#tr-popup[lang="tr"] .tr-popup__logo_service {width: 25px;background-position: 0 -54px;}#tr-popup .tr-popup__link_service:hover .tr-popup__logo {opacity: 0.6;}#tr-popup .tr-popup__input {width: 100%;height: 80px;resize: none;border: 2px solid #e5e5e5;padding: 8px;display: block;font-size: 15px;box-sizing: border-box;border-radius: 2px;}#tr-popup .tr-popup__input:focus {border-color: #bbb;}#tr-popup .tr-popup__block_a,#tr-popup .tr-popup__block_b {margin-top: 16px;}#tr-popup .tr-popup__block_a {display: flex;justify-content: space-between;}#tr-popup .tr-popup__block_b {position: relative;}#tr-popup .tr-popup__block_submit {text-align: right;margin-top: 24px;}#tr-popup .tr-popup__overlay {top: 0;left: 0;right: 0;bottom: 0;position: absolute;}#tr-popup .tr-popup__overlay_submitted {color: #999;z-index: 1;display: flex;background: #fff;align-items: center;justify-content: center;}#tr-popup:not([data-expanded="true"]) .tr-popup__block_b,#tr-popup:not([data-submitted="true"]) .tr-popup__overlay_submitted {display: none;}#tr-popup .tr-popup__menu {font-size: 13px;opacity: 0;visibility: hidden;white-space: nowrap;position: absolute;bottom: 100%;margin-bottom: 8px;padding: 4px 14px;z-index: 1;background-color: #f5f5f5;border: 1px solid #bbb;border-radius: 2px;box-shadow: 0px 0 0 1px rgba(0, 0, 0, 0.1), 0 8px 14px 0 rgba(51, 51, 51, 0.3);}#tr-popup[data-menu-position="left"] .tr-popup__menu {right: 0;}#tr-popup[data-menu="true"] .tr-popup__menu {opacity: 1;visibility: visible;}#tr-popup .tr-popup__menu:hover {background-color: #efefef;}#tr-popup .tr-popup__button {cursor: pointer;display: inline-block;-webkit-user-select: none;user-select: none;}#tr-popup .tr-popup__button_menu,#tr-popup .tr-popup__button_close {top: 4px;width: 20px;height: 20px;opacity: 0.3;position: absolute;}#tr-popup .tr-popup__button_close {right: 4px;background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTkuMjkzIDEwTDYuMTQ2IDYuODU0YS41LjUgMCAxIDEgLjcwOC0uNzA4TDEwIDkuMjkzbDMuMTQ2LTMuMTQ3YS41LjUgMCAwIDEgLjcwOC43MDhMMTAuNzA3IDEwbDMuMTQ3IDMuMTQ2YS41LjUgMCAwIDEtLjcwOC43MDhMMTAgMTAuNzA3bC0zLjE0NiAzLjE0N2EuNS41IDAgMCAxLS43MDgtLjcwOEw5LjI5MyAxMHoiLz48L3N2Zz4=");}#tr-popup .tr-popup__button_menu {right: 24px;background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjAiIHdpZHRoPSIyMCI+PHBhdGggZD0ibTUgNnYxaDEwdi0xaC0xMHptMCAzdjFoMTB2LTFoLTEwem0wIDN2MWgxMHYtMWgtMTB6Ii8+PC9zdmc+");}#tr-popup .tr-popup__button_menu:hover,#tr-popup .tr-popup__button_close:hover {opacity: 0.5;}#tr-popup .tr-popup__button_close:active {opacity: 0.6;}#tr-popup[data-menu="true"] .tr-popup__button_menu {opacity: 1;}#tr-popup .tr-popup__button_submit {color: #000;height: 28px;padding: 0 16px;font-size: 13px;min-width: 112px;background: #fc0;box-sizing: border-box;text-align: center;line-height: 28px;border-radius: 2px;}#tr-popup .tr-popup__button_submit:hover {background: #ffb800;}#tr-popup .tr-popup__button_submit:active {background: #ffa400;}#tr-popup[data-invalid="true"] .tr-popup__button_submit {color: rgba(0, 0, 0, 0.5);cursor: default;background: rgba(0, 0, 0, 0.1);}[data-type="trSpan"][data-selected="true"] {color: #222 !important;background: #cce4f7 !important;}[data-type="trSpan"] {font-size: inherit !important;}</style></head>
<body>

	<canvas id="mc" width="1280" height="720"></canvas>

	<script>
		window.onload = function() {
			document.addEventListener('keydown', changeDirection);
			setInterval(loop, 1000/60); // 60 FPS
		}

		var
			canv 				= document.getElementById('mc'), // canvas
			ctx					= canv.getContext('2d'), // 2d context
			gs = fkp			= false, // game started && first key pressed (initialization states)
			speed = baseSpeed 	= 3, // snake movement speed
			xv = yv				= 0, // velocity (x & y)
			px 					= ~~(canv.width) / 2, // player X position
			py 					= ~~(canv.height) / 2, // player Y position
			pw = ph				= 20, // player size
			aw = ah				= 20, // apple size
			apples				= [], // apples list
			trail				= [], // tail elements list (aka trail)
			tail 				= 100, // tail size (1 for 10)
			tailSafeZone		= 20, // self eating protection for head zone (aka safeZone)
			cooldown			= false, // is key in cooldown mode
			score				= 0; // current score

		// game main loop
		function loop()
		{
			// logic
			ctx.fillStyle = 'black';
			ctx.fillRect(0, 0, canv.width, canv.height);

			// force speed
			px += xv;
			py += yv;

			// teleports
			if( px > canv.width )
				{px = 0;}

			if( px + pw < 0 )
				{px = canv.width;}

			if( py + ph < 0 )
				{py = canv.height;}

			if( py > canv.height )
				{py = 0;}

			// paint the snake itself with the tail elements
			ctx.fillStyle = 'lime';
			for( var i = 0; i < trail.length; i++ )
			{
				ctx.fillStyle = trail[i].color || 'lime';
				ctx.fillRect(trail[i].x, trail[i].y, pw, ph);
			}

			trail.push({x: px, y: py, color: ctx.fillStyle});

			// limiter
			if( trail.length > tail )
			{
				trail.shift();
			}

			// eaten
			if( trail.length > tail )
			{
				trail.shift();
			}

			// self collisions
			if( trail.length >= tail && gs )
			{
				for( var i = trail.length - tailSafeZone; i >= 0; i-- )
				{
					if(
						px < (trail[i].x + pw)
						&& px + pw > trail[i].x
						&& py < (trail[i].y + ph)
						&& py + ph > trail[i].y
					)
					{
						// got collision
						tail = 10; // cut the tail
						speed = baseSpeed; // cut the speed (flash nomore lol xD)

						for( var t = 0; t < trail.length; t++ )
						{
							// highlight lossed area
							trail[t].color = 'red';

							if( t >= trail.length - tail )
								{break;}
						}
					}
				}
			}

			// paint apples
			for( var a = 0; a < apples.length; a++ )
			{
				ctx.fillStyle = apples[a].color;
				ctx.fillRect(apples[a].x, apples[a].y, aw, ah);
			}

			// check for snake head collisions with apples
			for( var a = 0; a < apples.length; a++ )
			{
				if(
					px < (apples[a].x + pw)
					&& px + pw > apples[a].x
					&& py < (apples[a].y + ph)
					&& py + ph > apples[a].y
				)
				{
					// got collision with apple
					apples.splice(a, 1); // remove this apple from the apples list
					tail += 10; // add tail length
					speed += .1; // add some speed
					spawnApple(); // spawn another apple(-s)
					break;
				}
			}
		}

		// apples spawner
		function spawnApple()
		{
			var
				newApple = {
					x: ~~(Math.random() * canv.width),
					y: ~~(Math.random() * canv.height),
					color: 'red'
				};

			// forbid to spawn near the edges
			if(
				(newApple.x < aw || newApple.x > canv.width - aw)
				||
				(newApple.y < ah || newApple.y > canv.height - ah)
			)
			{
				spawnApple();
				return;
			}

			// check for collisions with tail element, so no apple will be spawned in it
			for( var i = 0; i < tail.length; i++ )
			{
				if(
					newApple.x < (trail[i].x + pw)
					&& newApple.x + aw > trail[i].x
					&& newApple.y < (trail[i].y + ph)
					&& newApple.y + ah > trail[i].y
				)
				{
					// got collision
					spawnApple();
					return;
				}
			}

			apples.push(newApple);

			if( apples.length < 3 && ~~(Math.random() * 1000) > 700 )
			{
				// 30% chance to spawn one more apple
				spawnApple();
			}
		}

		// random color generator (for debugging purpose or just 4fun)
		function rc()
		{
			return '#' + ((~~(Math.random() * 255)).toString(16)) + ((~~(Math.random() * 255)).toString(16)) + ((~~(Math.random() * 255)).toString(16));
		}

		// velocity changer (controls)
		function changeDirection(evt)
		{
			if( !fkp && [37,38,39,40].indexOf(evt.keyCode) > -1 )
			{
				setTimeout(function() {gs = true;}, 1000);
				fkp = true;
				spawnApple();
			}

			if( cooldown )
				{return false;}

			/*
				4 directional movement.
			 */
			if( evt.keyCode == 37 && !(xv > 0) ) // left arrow
				{xv = -speed; yv = 0;}

			if( evt.keyCode == 38 && !(yv > 0) ) // top arrow
				{xv = 0; yv = -speed;}

			if( evt.keyCode == 39 && !(xv < 0) ) // right arrow
				{xv = speed; yv = 0;}

			if( evt.keyCode == 40 && !(yv < 0) ) // down arrow
				{xv = 0; yv = speed;}

			cooldown = true;
			setTimeout(function() {cooldown = false;}, 100);
		}
	</script>


<div id="tr-popup" class="tr-popup" translate="no" data-hidden="true" data-invalid="true" data-disabled="false" lang="ru"><div class="tr-popup__block"><span class="tr-popup__title_original">Оригинальный текст:</span> <span class="tr-popup__value"></span></div><div class="tr-popup__block tr-popup__block_a"><span class="tr-popup__link tr-popup__link_suggest" data-action="expand">Предложить перевод</span><a href="https://translate.yandex.ru" class="tr-popup__link tr-popup__link_service" target="_blank" data-action="navigate"><span class="tr-popup__logo tr-popup__logo_company"></span><span class="tr-popup__logo tr-popup__logo_service"></span></a></div><div class="tr-popup__block tr-popup__block_b"><textarea class="tr-popup__input" spellcheck="false" autocapitalize="off" autocorrect="off" autocomplete="off" maxlength="1000"></textarea><div class="tr-popup__block tr-popup__block_submit"><span role="button" class="tr-popup__button tr-popup__button_submit" data-action="send">Отправить</span></div><div class="tr-popup__overlay tr-popup__overlay_submitted">Спасибо, перевод отправлен</div></div><span role="button" class="tr-popup__button tr-popup__button_close" data-action="clickClose"></span><span role="button" class="tr-popup__button tr-popup__button_menu" data-action="clickMenu"><span class="tr-popup__menu" data-action="disablePopup">Отключить подсказку с оригинальным текстом</span></span><span class="tr-popup__arrow"></span></div></body></html>